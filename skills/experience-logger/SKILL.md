---
name: experience-logger
description: 当解决问题或讨论得出结论时，自动将经验和结论按分类记录到对应的 Markdown 文档中。当用户说"记录一下"、"总结经验"、"保存结论"、"归档这个问题"或讨论结束需要保存时使用此 Skill。
license: MIT
---

# 经验记录 Skill

## 核心功能

1. **记录经验**：将问题解决方案和结论保存到对应分类文件
2. **查找经验**：遇到问题时优先从已有经验中检索相关内容
3. **网络搜索**：已有经验未找到时，上网搜索相关资料
4. **动态更新**：验证、补充、修正已有经验记录

## 何时使用

### 触发记录
- 成功解决了一个技术问题
- 讨论某个话题得出了有价值的结论
- 用户明确要求记录/保存/归档当前内容

### 触发查找
- 用户遇到技术问题时，**优先检索** `~/.copilot/experiences/` 目录
- 用户说"之前是怎么解决的"、"有没有相关经验"、"查一下记录"

### 触发网络搜索
- 已有经验中**未找到**相关内容
- 需要获取最新的官方文档或解决方案
- 用户明确要求"上网查一下"、"搜索一下"

### 触发更新
- 发现已有记录需要补充新信息
- 已有记录的方案有更好的替代方案
- 需要添加新的参考链接或验证结果

## 记录存放位置

所有经验记录统一存放在：`~/.copilot/experiences/`

采用**大类文件夹 + 细分文件**的二级结构。

## 分类体系

### unity/ - Unity 引擎

| 文件 | 适用内容 |
|------|---------|
| `csharp.md` | Unity C# 脚本：MonoBehaviour、协程、事件、ScriptableObject |
| `physics.md` | 物理系统：Rigidbody、Collider、碰撞检测、射线、关节 |
| `shader.md` | Unity Shader：ShaderLab、Shader Graph、材质 |
| `vfx.md` | 特效技法：粒子系统、VFX Graph、后处理 |
| `ui.md` | UI 系统：UGUI、UI Toolkit、Canvas 优化 |
| `animation.md` | 动画系统：Animator、状态机、IK、Timeline |
| `performance.md` | 性能优化：内存、GC、Draw Call、批处理、Profiler |
| `editor.md` | 编辑器扩展：Inspector、EditorWindow、工具开发 |
| `networking.md` | 网络开发：Netcode、Mirror、同步 |
| `asset.md` | 资源管理：AssetBundle、Addressables、热更新 |
| `misc.md` | 其他 Unity 相关 |

### csharp/ - C# 语言

| 文件 | 适用内容 |
|------|---------|
| `syntax.md` | 语法特性：泛型、委托、事件、特性、反射 |
| `async.md` | 异步编程：async/await、Task、并发控制 |
| `linq.md` | LINQ 查询：表达式、方法语法、性能 |
| `patterns.md` | 设计模式：单例、工厂、观察者、SOLID |
| `collections.md` | 集合数据结构：List、Dictionary、Span |
| `dotnet.md` | .NET API：IO、网络、JSON、正则 |
| `misc.md` | 其他 C# 相关 |

### shader/ - Shader 开发

| 文件 | 适用内容 |
|------|---------|
| `hlsl.md` | HLSL 语法：数据类型、函数、语义 |
| `urp.md` | URP 管线：URP Shader、渲染特性 |
| `hdrp.md` | HDRP 管线：光照、体积效果 |
| `techniques.md` | 渲染技术：光照模型、阴影、PBR |
| `optimization.md` | 性能优化：指令、采样、变体 |
| `effects.md` | 特效实现：溶解、描边、扭曲、水面 |
| `misc.md` | 其他 Shader 相关 |

### git/ - 版本控制

| 文件 | 适用内容 |
|------|---------|
| `commands.md` | 常用命令：基础、高级、组合技巧 |
| `workflow.md` | 工作流：分支策略、PR、代码审查 |
| `troubleshooting.md` | 问题解决：冲突、回滚、恢复 |
| `lfs.md` | LFS 大文件：配置、迁移 |
| `misc.md` | 其他 Git 相关 |

### vscode/ - VS Code

| 文件 | 适用内容 |
|------|---------|
| `shortcuts.md` | 快捷键：常用、自定义、多光标 |
| `extensions.md` | 扩展：推荐、配置、开发 |
| `settings.md` | 配置：settings.json、工作区 |
| `copilot.md` | Copilot：Chat、Agent、Skills、MCP |
| `debugging.md` | 调试：launch.json、断点 |
| `misc.md` | 其他 VS Code 相关 |

### python/ - Python

| 文件 | 适用内容 |
|------|---------|
| `syntax.md` | 语法：类型提示、装饰器、上下文 |
| `libraries.md` | 常用库：requests、pandas、numpy |
| `automation.md` | 自动化：文件处理、批量操作 |
| `environment.md` | 环境管理：venv、conda、pip |
| `misc.md` | 其他 Python 相关 |

### tools/ - 开发工具

| 文件 | 适用内容 |
|------|---------|
| `terminal.md` | 终端命令：Shell、脚本、别名 |
| `build.md` | 构建工具：npm、webpack、vite |
| `debug.md` | 调试工具：日志、性能、内存分析 |
| `cicd.md` | CI/CD：GitHub Actions、自动化 |
| `misc.md` | 其他工具相关 |

### general/ - 通用

| 文件 | 适用内容 |
|------|---------|
| `misc.md` | 无法归类的其他有价值内容 |

## 记录格式

每条记录使用以下格式追加到对应文件：

```markdown
---

## [简短标题]

**日期**：YYYY-MM-DD  
**更新**：YYYY-MM-DD（如有更新）  
**标签**：#标签1 #标签2  
**状态**：✅ 已验证 | ⚠️ 待验证 | 🔄 已过时

**问题/场景**：

[描述遇到的问题或讨论的场景]

**解决方案/结论**：

[详细的解决方案或得出的结论]

**关键代码**（如有）：

\`\`\`语言
// 相关代码片段
\`\`\`

**参考链接**：

- [官方文档](URL) - 简要说明
- [相关文章](URL) - 简要说明

**验证记录**（如有）：

- [YYYY-MM-DD] 验证通过/发现问题，补充说明

**备注**：

[其他补充说明]
```

## 操作步骤

### 一、查找已有经验（优先执行）

当用户遇到问题时，**首先**执行以下步骤：

1. **判断问题领域**：确定应该检索哪个分类目录
2. **读取相关文件**：读取对应分类的 md 文件内容
3. **搜索匹配记录**：根据关键词、标签查找相关经验
4. **呈现给用户**：
   - 如果找到相关记录，展示内容并询问是否适用
   - 如果未找到，**转入"网络搜索"步骤**
5. **验证有效性**：根据当前情况判断记录是否仍然有效

### 二、网络搜索（经验未找到时）

当已有经验中**未找到相关内容**时，执行以下步骤：

1. **告知用户**："未在经验记录中找到相关内容，正在上网搜索..."
2. **构建搜索关键词**：根据问题提取核心关键词
3. **执行网络搜索**：使用 `#fetch` 工具搜索相关资料
4. **优先搜索来源**（按优先级）：
   - 官方文档（Unity Docs、Microsoft Docs、MDN 等）
   - 官方论坛/讨论区
   - Stack Overflow
   - 知名技术博客
5. **整理搜索结果**：
   - 提取关键信息和解决方案
   - 记录参考链接来源
   - 标注信息的时效性（发布日期/版本）
6. **呈现给用户**：展示搜索到的解决方案
7. **询问是否记录**：如果解决了问题，询问是否将此经验记录下来

### 三、记录新经验

1. **识别内容**：判断当前对话中是否有值得记录的经验或结论
2. **确定分类**：根据内容主题选择对应的分类文件
3. **检查重复**：查看目标文件中是否已有类似记录
   - 如有类似记录，转为"更新"操作
   - 如无类似记录，执行"新增"操作
4. **提取要点**：
   - 简短标题（一句话概括）
   - 问题/场景描述
   - 解决方案/结论
   - 关键代码片段（如有）
   - 相关标签
   - **参考链接**（尽量提供官方文档或可信来源）
5. **格式化内容**：按照上述模板格式化
6. **追加写入**：将内容追加到对应分类文件末尾
7. **确认反馈**：告知用户已记录到哪个文件

### 四、更新已有经验

当发现已有记录需要更新时：

1. **定位记录**：找到需要更新的经验条目
2. **判断更新类型**：
   - **补充**：添加新的信息、代码示例、参考链接
   - **修正**：纠正错误或过时的内容
   - **标记过时**：将状态改为 🔄 已过时，并说明原因
3. **执行更新**：
   - 更新"更新日期"字段
   - 在"验证记录"中添加本次验证/更新说明
   - 修改相应内容
4. **反馈用户**：说明更新了什么内容

### 五、处理大型内容 (Large Content Handling)

当经验内容非常丰富（如完整的设计文档、架构图解、长篇复盘）时，**不应**直接全部堆积在汇总文件中，而应采用**摘要 + 独立文档**的策略。

#### 触发条件
- 内容长度超过 50 行
- 包含大量图表代码（如 Mermaid 流程图）
- 属于完整的技术方案、API 文档或架构设计
- 用户明确要求保存为独立文档

#### 处理流程
1. **创建独立文档**：
   - 命名规范：`[分类]/docs/[英文_下划线_命名].md`
   - 例如：`unity/docs/VR_Variant_Collector_Architecture.md`
   - 内容：包含完整的所有细节、代码和图表
2. **编写摘要记录**：
   - 在主分类文件（如 `unity/shader.md`）中添加一条标准记录
   - 内容：仅保留背景、核心结论和关键点
   - **关键步骤**：在记录末尾添加`详细文档`链接，指向刚才创建的独立文档
   - 链接格式：`- [文档标题](./docs/filename.md)`
3. **提交与保存**：
   - 同时提交摘要文件和独立文档

## 示例

### 示例 1：查找已有经验

**用户**："Unity 协程怎么正确等待一帧？"

**操作**：
1. 判断为 Unity C# 相关 → 读取 `unity/csharp.md`
2. 搜索关键词"协程"、"yield"、"等待"
3. 找到相关记录 → 展示给用户
4. 反馈："在经验记录中找到相关内容，建议使用 yield return null..."

### 示例 2：经验未找到，上网搜索

**用户**："Unity DOTS 的 IJobEntity 怎么用？"

**操作**：
1. 判断为 Unity 相关 → 读取 `unity/csharp.md`
2. 搜索关键词"DOTS"、"IJobEntity"、"Job"
3. 未找到相关记录
4. 告知用户："未在经验记录中找到相关内容，正在上网搜索..."
5. 搜索 Unity 官方文档关于 DOTS/IJobEntity 的内容
6. 整理搜索结果并展示解决方案
7. 询问："问题解决了吗？需要将此经验记录下来吗？"

### 示例 3：记录新经验

**用户**："帮我记录一下刚才解决的 Unity 协程问题"

**操作**：
1. 识别为 Unity C# 脚本相关 → 归类到 `unity/csharp.md`
2. 检查是否有类似记录 → 无
3. 提取关键信息：
   - 标题：Unity 协程中使用 yield return null 替代 yield return 0
   - 问题：协程中使用 yield return 0 导致性能问题
   - 解决：使用 yield return null 更高效
   - 参考链接：Unity 官方文档链接
4. 追加到 `~/.copilot/experiences/unity/csharp.md`
5. 反馈："已将协程优化经验记录到 unity/csharp.md"

### 示例 4：更新已有经验

**用户**："刚才那个协程问题，我发现还有个注意点要补充"

**操作**：
1. 定位到 `unity/csharp.md` 中的协程相关记录
2. 判断为"补充"类型更新
3. 添加更新日期、新增内容
4. 在"验证记录"中添加说明
5. 反馈："已更新 unity/csharp.md 中的协程经验记录"

### 示例 5：处理大型架构文档

**用户**："把这个 VR 变体收集器的完整设计文档保存下来"

**操作**：
1. 识别为大型内容，同时也属于 Unity Shader 领域
2. 创建独立文件：`~/.copilot/experiences/unity/docs/VR_Variant_Collector.md`，写入完整内容
3. 在 `unity/shader.md` 中追加记录：
   - 标题：VR Shader 变体收集器架构
   - 结论：摘要核心的打包策略和编译坑点
   - 链接：`- [完整架构文档](./docs/VR_Variant_Collector.md)`
4. 反馈："已将架构文档主要内容归档，完整细节保存于独立文档中"

## 注意事项

### 记录规范
- 如果目标文件不存在，先创建文件并添加标题头
- 每条记录之间用 `---` 分隔
- 标签使用 `#` 前缀，便于后续搜索
- 日期使用 ISO 格式 (YYYY-MM-DD)
- 代码片段保持简洁，只记录关键部分
- 如果用户没有明确分类，根据内容自动判断

### 参考链接规范
- **优先官方文档**：Unity 官方、Microsoft Docs、MDN 等
- **标注链接用途**：简要说明该链接提供什么信息
- **验证链接有效性**：如果发现链接失效，标记并尝试找替代
- **版本敏感内容**：标注适用的版本范围（如 Unity 2021+）

### 状态标记说明
| 状态 | 含义 |
|------|------|
| ✅ 已验证 | 经过实际验证，确认有效 |
| ⚠️ 待验证 | 理论可行但未经实际验证 |
| 🔄 已过时 | 方案已过时或有更好替代，保留供参考 |

### 查找优先级
遇到问题时按以下顺序处理：
1. **优先**搜索 `~/.copilot/experiences/` 中的已有经验
2. 如果未找到，**上网搜索**相关资料（官方文档优先）
3. 整理解决方案并呈现给用户
4. 解决后询问是否需要记录到经验库

### 网络搜索策略
- **搜索时机**：已有经验未找到相关内容时自动触发
- **搜索优先级**：官方文档 > 官方论坛 > Stack Overflow > 技术博客
- **结果处理**：整理关键信息，保留参考链接，标注版本/日期
- **记录建议**：搜索到有价值内容后，主动询问是否记录

## 文件头模板

新建分类文件时，使用以下头部：

```markdown
# [分类名称] 经验记录

> 自动记录的问题解决经验和技术结论，便于后续参考。

---
```
